const fs = require("fs");

// Зчитуємо файли
const headlines = fs.readFileSync("headlines.txt", "utf-8").split("\n");
const subheadlines = fs.readFileSync("subheadlines.txt", "utf-8").split("\n");

// Регулярний вираз для пошуку прізвищ та імен
const namePattern = /([А-ЯЁ][а-яё]+\s+[А-ЯЁ][а-яё]+)/g;

// Ключові слова, що вказують на смерть
const deathKeywords = [
  "загибель",
  "пам'ять",
  "скорбь",
  "печаль",
  "трагедия",
  "утрата",
  "панихида",
  "скорбящие",
  "скорбящий",
  "несчастье",
  "несчастный случай",
  "отдавая дань",
  "соболезнования",
  "сердечное соболезнование",
  "слезы",
  "траурная церемония",
  "поминальная служба",
  "покойный",
  "покойная",
  "вечная память",
  "траурная лента",
  "памятник",
  "лежит под землей",
  "грустная новость",
  "вечный покой",
  "похоронная процессия",
  "прощание с покойным",
  "ушёл из жизни",
  "погиб",
  "смерть",
  "простились",
  "погибшим",
  "умер",
  "убит",
  "скончался",
  "похороны",
  "захоронение",
  "погибшие",
  "траур",
  "проводили в последний путь",
  "жертва",
  "гибель",
  "прощание",
  "прощались",
  "пал",
  "посмертно",
  "вдова",
  "вдовец",
  "погибшего",
  "павшие",
  "Светлая память",
];

const names = new Set(); // Використовуємо Set, щоб уникнути дублікатів

// Функція для пошуку імен у масиві рядків
const findNames = (textArray) => {
  textArray.forEach((line) => {
    // Перевіряємо наявність ключових слів у заголовках
    const containsDeathKeyword = deathKeywords.some((keyword) =>
      line.toLowerCase().includes(keyword)
    );
    if (containsDeathKeyword) {
      const matches = line.match(namePattern);
      if (matches) {
        matches.forEach((name) => names.add(name)); // Додаємо знайдені імена до Set
      }
    }
  });
};

// Знаходимо імена в заголовках
findNames(headlines);
findNames(subheadlines);

// Виводимо знайдені імена
console.log("Знайдені імена та прізвища загиблих:");
names.forEach((name) => console.log(name));
